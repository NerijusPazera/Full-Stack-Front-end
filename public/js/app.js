!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";function i(t,e){const s=n(t);e.appendChild(s)}function n(t){if("string"==typeof t)return document.createTextNode(t);const{nodeName:e,attributes:s,children:a}=t;let r;return r="function"==typeof e?function(t,e){const s=new t(e),i=n(s.render());return s.$node=i,i}(e,s):function(t,e){const s=document.createElement(t);for(let t in e)"function"==typeof e[t]?s.addEventListener(t,e[t]):s.setAttribute(t,e[t]);return s}(e,s),a.forEach(t=>i(t,r)),r}s.r(e);class a{constructor(t){this.$node=null,this.props=t,this.state={}}setState(t){this.state={...this.state,...t},function(t){const e=n(t.render());t.$node.replaceWith(e),t.$node=e}(this)}}function r(t,e={},...s){return{nodeName:t,attributes:e,children:s}}class o extends a{constructor(t){super(t),this.handleId=this.handleId.bind(this)}handleId(){this.props.handler(this.props.id)}render(){return r("a",{click:this.handleId,href:this.props.href})}}class h extends a{constructor(t){super(t)}render(){return r("button",{class:this.props.class},this.props.name)}}class l extends a{constructor(t){super(t)}render(){return r("input",{keyup:this.props.handler,class:this.props.class,placeholder:this.props.placeholder})}}class d extends a{constructor(t){super(t),this.state.post={title:"",body:""},this.handleSubmit=this.handleSubmit.bind(this),this.handleTopic=this.handleTopic.bind(this),this.handlePara=this.handlePara.bind(this)}handleTopic(t){this.state.post.title=t.target.value}handlePara(t){this.state.post.body=t.target.value}handleSubmit(t){t.preventDefault();for(let t in this.state.post){if(""===this.state.post[t].trim())return!1}this.props.handler(this.state.post)}render(){return r("form",{class:"form",submit:this.handleSubmit},r("h3",{},"Enter New"),r(l,{class:"topic",placeholder:"Topic",handler:this.handleTopic}),r(l,{class:"para",placeholder:"Your Story...",handler:this.handlePara}),r(h,{class:"submit-btn",name:"submit"}))}}class c extends a{constructor(t){super(t),this.idHandler=this.idHandler.bind(this)}idHandler(){this.props.handleDelete(this.props.id)}render(){return r("article",{mouseenter:this.props.handleShow,mouseleave:this.props.handleHide},r("h2",{},this.props.title),r("p",{},this.props.body),r("i",{class:"fas fa-trash-alt",click:this.idHandler,style:"display: none"}))}}const p=document.getElementById("nav-container"),u=document.getElementById("main");i(r(class extends a{constructor(t){super(t),this.state.links=["home","login","register"],this.state.active=0,this.onClick=this.onClick.bind(this)}onClick(t){this.setState({active:t})}render(){const t=this.state.active,e=this.state.links.map((e,s)=>r("li",{class:t===s?"active":""},r(o,{handler:this.onClick,id:s,href:"#"},e)));return r("nav",{},r("div",{class:"nav-img"}),r("ul",{class:"nav-links"},...e))}}),p),i(r(class extends a{constructor(t){super(t),this.state.articles=[],this.fetchData(),this.state.isLoading=!0,this.addPost=this.addPost.bind(this),this.postData=this.postData.bind(this),this.deletePost=this.deletePost.bind(this),this.fetchData=this.fetchData.bind(this),this.setData=this.setData.bind(this)}fetchData(){fetch("http://rest.stecenka.lt/api/posts").then(t=>t.json()).then(t=>this.setData(t))}setData(t){this.setState({articles:t,isLoading:!1})}postData(t){fetch("http://rest.stecenka.lt/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(t=>t.json()).then(t=>this.addPost(t))}addPost(t){const e=this.state.articles;e.push({...t}),this.setState({articles:e})}showDelete(t){t.target.lastChild.style="display: block"}hideDelete(t){t.target.lastChild.style="display: none"}async deletePost(t){const e=await fetch("http://rest.stecenka.lt/api/posts/"+t,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(await e.json()){const e=this.state.articles.findIndex(e=>e.id===t);this.state.articles.splice(e,1),this.setData(this.state.articles)}}render(){const t=this.state.articles.map(t=>r(c,{handleShow:this.showDelete,handleHide:this.hideDelete,handleDelete:this.deletePost,title:t.title,body:t.body,id:t.id}));return this.state.isLoading?r("div",{class:"spinner-container"},r("div",{class:"spinner"})):r("div",{class:"articles-container"},...t,r(d,{handler:this.postData}))}}),u)}]);